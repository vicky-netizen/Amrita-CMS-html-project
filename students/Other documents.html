<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
<title>Jaideep P - CMS</title>
<style>
body{
	color:black;
	font-family: Arial, Helvetica, sans-serif;
	background-image:url("https://d.newsweek.com/en/full/294255/serene-campus.jpg");
  background-size: cover;
  background-attachment: fixed;
}

.navbar {
  overflow: hidden;
  animation: fadeIn 2s ease-in;
  width:70%;
}

.navbar .home{
	margin-left:auto;
}

.navbar a {
  float: left;
  font-size: 16px;
  color: black;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

.navbar a:hover:not(.no-hover){
  background-color: #f2f2f2;
  color: #333;
}

.dropdown {
  float: left;
  overflow: hidden;
}

.dropdown .dropbtn2 {
  font-size: 16px;  
  border: none;
  outline: none;
  color: black;
  padding: 14px 16px;
  background-color: inherit;
  font-family: inherit;
  margin: 0;
}

.dropdown-content {
  display: none;
  position: absolute;
  background-color: #f9f9f9;
  min-width: 160px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.dropdown-content label {
  display: block;
  margin-bottom: 6px;
}

.dropdown-content input[type="checkbox"] {
  margin-right: 6px;
}

.dropdown-content a {
  float: none;
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.dropdown-content a:hover {
  background-color: white;
}

.dropdown:hover .dropdown-content {
  display: block;
}

table{
	border:1px solid grey;
	animation:fadeInRight 1s ease-in-out;
	border-collapse:collapse;
	background-color:white;
	opacity:0.8;
	width:100%
}
td{
	border:1px solid grey;
	padding:20px;
}

.dochead{
	border-top:1px solid grey;
	border-bottom:1px solid grey;
	color:grey;
	
}

.button {
  background-color: black;
  border: none;
  color: white;
  padding: 15px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  cursor: pointer;
}

.dropbtn {
  background-color: black;
  color: white;
  padding: 12px;
  font-size: 16px;
  border: none;
  cursor: pointer;
}

.dropbtn:hover, .dropbtn:focus {
  background-color: #3c424d;
}

.editcol {
  position: relative;
  display: inline-block;
}

.editcol-content {
  display: none;
  position: absolute;
  background-color: #f1f1f1;
  min-width: 160px;
  overflow: auto;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
  z-index: 1;
}

.editcol-content a {
  color: black;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
}

.editcol a:hover {background-color: #ddd;}

.show {display: block;}

@keyframes fadeInRight {
  from {
    opacity: 0;
    transform: translateX(300px);
  }
  to {
    opacity: 0.8;
  }
}

.dropbtn1 {
  background-color: black;
  color: white;
  padding: 12px;
  font-size: 16px;
  border: none;
  cursor: pointer;
}

.toggle-column.hidden {
  display: none;
}

 #file-details::placeholder {
    font-size: 17px; /* Adjust the font size as needed */
  }

  #file-title::placeholder {
    font-size: 17px; /* Adjust the font size as needed */
  }

</style>
</head>
<body>
<h1>Jaideep P</h1>
<h2>CB.EN.U4CSE22563</h2>
<div class="navbar">
	<a href="C:\Users\Jaideep\Desktop\html project\students\students.html">Personal Details</a>
	<a href="C:\Users\Jaideep\Desktop\html project\students\academic history.html">Academic History</a>
	<a href="C:\Users\Jaideep\Desktop\html project\students\parents and guardians.html">Parents & Guardians</a>
	<a style="background-color: #f2f2f2;" href="#">Documents</a>
	<div class="dropdown">
    		<button class="dropbtn2">more 
      		<i class="fa fa-caret-down"></i>
    		</button>
    		<div class="dropdown-content">
      		<a href="C:\Users\Jaideep\Desktop\html project\students\more\fee payments.html">Fee Payments</a>
		<a href="C:\Users\Jaideep\Desktop\html project\students\more\acheivements.html">Achievements</a>
		<a href="C:\Users\Jaideep\Desktop\html project\students\more\competitive exams.html">Competitive Exams</a>
		<a href="C:\Users\Jaideep\Desktop\html project\students\more\covid19.html">COVID-19 Vccinations</a>
		<a href="C:\Users\Jaideep\Desktop\html project\students\more\antiragging undertaking.html">Antiragging Undertaking</a>
    		</div>
  	</div>
	<a style="float: right; line-height: 5px; margin-top: 5px;" class="home" href="C:\Users\Jaideep\Desktop\html project\project.html"><img src="C:\Users\Jaideep\Desktop\html project\images\home logo.png" width="20" height="20" style="vertical-align: middle;">Home</a>
</div>
<div class="dochead">
  <h1 style="display: flex; justify-content: space-between; align-items: center;">
    <span id="no-documents-message" style="text-align: left;display: none;">No documents found</span>
    <form id="upload-form" style="text-align: right;">
      <input type="text" id="file-title" placeholder="Enter title" required style="width: 200px;height:20px;font-size: 17px;"">
      <input type="text" id="file-details" placeholder="Enter details" required style="width: 200px;height:20px;font-size: 17px;"">
      <label for="file-upload" class="button">Upload new document</label>
      <input id="file-upload" hidden="hidden" type="file" class="file-upload" accept=".pdf,.doc,.docx,.txt">
    </form>
  </h1>
</div>
<br>
<div class="editcol">
  <button onclick="toggleDropdown()" class="dropbtn">Edit Columnsâ®Ÿ</button>
  <div id="dropdown" class="dropdown-content">
    <label><input type="checkbox" checked onchange="toggleColumn('received-on')">Received On</label>
    <label><input type="checkbox" checked onchange="toggleColumn('title')">Title</label>
    <label><input type="checkbox" checked onchange="toggleColumn('details')">Details</label>
    <label><input type="checkbox" checked onchange="toggleColumn('uploaded-on')">Uploaded On</label>
  </div>
</div>
<form style="text-align: right;color:white;">
Search
<input type="text" name="search" value="" placeholder="Enter title">
</form>
<br>
<table id="document-table">
  <tr>
    <td>S.no</td>
    <td class="received-on">Received On</td>
    <td class="title">Title</td>
    <td class="details">Details</td>
    <td class="uploaded-on">Uploaded On</td>
    <td>Action</td>
  </tr>
  <tr>
    <td>1</td>
    <td class="received-on">Oct 11, 2022</td>
    <td class="title">Birth Certificate</td>
    <td class="details">Verification</td>
    <td class="uploaded-on">Oct 11, 2022</td>
    <td><button class="button" onclick="deleteRow(this)">Delete</button></td>
  </tr>
  <tr>
    <td>2</td>
    <td class="received-on">Oct 11, 2022</td>
    <td class="title">Community Certificate</td>
    <td class="details">Verification</td>
    <td class="uploaded-on">Oct 11, 2022</td>
    <td><button class="button" onclick="deleteRow(this)">Delete</button></td>
  </tr>
  <tr>
    <td>3</td>
    <td class="received-on">Oct 11, 2022</td>
    <td class="title">Aadhar</td>
    <td class="details">Verification</td>
    <td class="uploaded-on">Oct 11, 2022</td>
    <td><button class="button" onclick="deleteRow(this)">Delete</button></td>
  </tr>
  <tr>
    <td>4</td>
    <td class="received-on">Oct 11, 2022</td>
    <td class="title">Transfer Certificate</td>
    <td class="details">Verification</td>
    <td class="uploaded-on">Oct 11, 2022</td>
    <td><button class="button" onclick="deleteRow(this)">Delete</button></td>
  </tr>
  <tr>
    <td>5</td>
    <td class="received-on">Oct 11, 2022</td>
    <td class="title">AEEE 2021 Score Card</td>
    <td class="details">98 percentile</td>
    <td class="uploaded-on">Oct 11, 2022</td>
    <td><button class="button" onclick="deleteRow(this)">Delete</button></td>
  </tr>
  <tr>
    <td>6</td>
    <td class="received-on">Oct 11, 2022</td>
    <td class="title">Provisional Administration Order</td>
    <td class="details">Verification</td>
    <td class="uploaded-on">Oct 11, 2022</td>
    <td><button class="button" onclick="deleteRow(this)">Delete</button></td>
  </tr>
  <tr>
    <td>7</td>
    <td class="received-on">Oct 11, 2022</td>
    <td class="title">Joint Declaration by Student & Parent</td>
    <td class="details">Confirmation</td>
    <td class="uploaded-on">Oct 11, 2022</td>
    <td><button class="button" onclick="deleteRow(this)">Delete</button></td>
  </tr>
  <tr>
    <td>8</td>
    <td class="received-on">Oct 11, 2022</td>
    <td class="title">Anti Ragging Declaration</td>
    <td class="details">Confirmation</td>
    <td class="uploaded-on">Oct 11, 2022</td>
    <td><button class="button" onclick="deleteRow(this)">Delete</button></td>
  </tr>
  <tr>
    <td>9</td>
    <td class="received-on">Oct 11, 2022</td>
    <td class="title">Medical Fitness Certificate</td>
    <td class="details">Fit</td>
    <td class="uploaded-on">Oct 11, 2022</td>
    <td><button class="button" onclick="deleteRow(this)">Delete</button></td>
  </tr>
</table>
</body>
</html>
<script>
// Function to handle clicks outside of dropdown menu
window.addEventListener('click', function(event) {
  var dropdowns = document.getElementsByClassName("editcol-content");

  // Check if the clicked element is a dropdown button
  var clickedDropdown = event.target.closest('.dropbtn');

  // Hide dropdown menus if the clicked element is not a dropdown button
  if (!clickedDropdown) {
    for (var i = 0; i < dropdowns.length; i++) {
      var dropdown = dropdowns[i];
      if (dropdown.classList.contains('show')) {
        dropdown.classList.remove('show');
      }
    }
  }
  else {
    event.stopPropagation(); // Prevent the event from propagating to the window
  }
});


// JavaScript code

let documentCount = 9;
let tableData = [];

function loadTableData() {
  // Retrieve table data from localStorage
  const storedData = localStorage.getItem("tableData");

  if (storedData) {
    tableData = JSON.parse(storedData);

    const table = document.getElementById("document-table");
    table.innerHTML = ""; // Clear existing table rows

    for (let i = 0; i < tableData.length; i++) {
      const document = tableData[i];
      const row = createTableRow(document, i + 1);
      table.appendChild(row);
    }
  }
}

document.getElementById("file-upload").addEventListener("change", handleFileUpload);

function handleFileUpload(event) {
  const file = event.target.files[0];
  const title = document.getElementById("file-title").value;
  const details = document.getElementById("file-details").value;

  // Validate input fields
  if (!file || !title || !details) {
    alert("Please enter title and detiails of the file");
    return;
  }

  // Generate a new row for the table
  const row = document.createElement("tr");
  const sNoCell = document.createElement("td");
  const receivedOnCell = document.createElement("td");
  const titleCell = document.createElement("td");
  const detailsCell = document.createElement("td");
  const uploadedOnCell = document.createElement("td");
  const actionCell = document.createElement("td");

  // Set the text content of the cells
  documentCount++;
  sNoCell.textContent = documentCount;
  receivedOnCell.textContent = getCurrentDate();
  titleCell.classList.add("received-on");
  titleCell.textContent = title;
  titleCell.classList.add("title");
  detailsCell.textContent = details;
  titleCell.classList.add("details");
  uploadedOnCell.textContent = getCurrentDate();
  titleCell.classList.add("uploaded-on");
  actionCell.innerHTML = '<button class="button" onclick="deleteRow(this)">Delete</button>';

  // Append cells to the row
  row.appendChild(sNoCell);
  row.appendChild(receivedOnCell);
  row.appendChild(titleCell);
  row.appendChild(detailsCell);
  row.appendChild(uploadedOnCell);
  row.appendChild(actionCell);

  // Append the row to the table
  const table = document.getElementById("document-table");
  table.appendChild(row);
  
    const newDocument = {
    receivedOn: getCurrentDate(),
    title: title,
    details: details,
    uploadedOn: getCurrentDate()
  };
  tableData.push(newDocument);

  // Save table data to localStorage
  saveTableData();

  // Clear the file input and input fields
  event.target.value = "";
  document.getElementById("file-title").value = "";
  document.getElementById("file-details").value = "";

  // Hide the "No documents found" message if table has any rows
  const noDocumentsMessage = document.getElementById("no-documents-message");
  noDocumentsMessage.style.display = table.rows.length > 1 ? "none" : "block";
}

function saveTableData() {
  // Save table data to localStorage
  localStorage.setItem("tableData", JSON.stringify(tableData));
}

function getCurrentDate() {
  const date = new Date();
  const options = { year: 'numeric', month: 'short', day: 'numeric' };
  return date.toLocaleDateString(undefined, options);
}

function deleteRow(button) {
  const row = button.closest("tr");
  row.remove();

  const table = document.getElementById("document-table"); // Move the declaration here

  const rowIndex = Array.from(table.rows).indexOf(row) - 1;
  tableData.splice(rowIndex, 1);

  // Display the "No documents found" message if table becomes empty
  const noDocumentsMessage = document.getElementById("no-documents-message");
  noDocumentsMessage.style.display = table.rows.length === 1 ? "block" : "none";
}

// Function to toggle the visibility of a specific table column
function toggleColumn(className) {
  var columns = document.getElementsByClassName(className);

  for (var i = 0; i < columns.length; i++) {
    var column = columns[i];
    column.style.display = column.style.display === "none" ? "table-cell" : "none";
  }
}

// Function to toggle the visibility of the dropdown menu
function toggleDropdown() {
  var dropdown = document.getElementById("dropdown");
  dropdown.style.display = dropdown.style.display === "none" ? "block" : "none";
}

// Close the dropdown menu if the user clicks outside of it
window.onclick = function(event) {
  if (!event.target.matches(".dropbtn")) {
    var dropdown = document.getElementById("dropdown");
    if (dropdown.style.display === "block") {
      dropdown.style.display = "none";
    }
  }
};

function searchTable() {
      const searchInput = document.querySelector('input[name="search"]');
      const searchTitle = searchInput.value.trim().toLowerCase();

      const table = document.getElementById("document-table");
      const rows = table.getElementsByTagName("tr");

      for (let i = 1; i < rows.length; i++) {
        const titleCell = rows[i].querySelector(".title");
        const title = titleCell.textContent.toLowerCase();

        if (title.includes(searchTitle)) {
          rows[i].style.display = "";
        } else {
          rows[i].style.display = "none";
        }
      }
    }

    // Attach event listener to the search input
    document.querySelector('input[name="search"]').addEventListener("input", searchTable);
</script>